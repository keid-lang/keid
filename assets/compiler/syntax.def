// This file defines the Keid syntax.
// The parser for this file can be found in `parser.keid`.
// See "syntax.def.README.md" for documentation regarding the format of this file.

Newline { "\r\n" | "\n" }

rule Identifier
    'A-Z' | 'a-z' | '_'
    optional repeated 'A-Z' | 'a-z' | '_' | '0-9'
end rule

rule TypeModifier
    "public"
end rule

rule ClassDecl
    $modifiers = optional repeated TypeModifier
    "class"
    move
    $name = Identifier
end rule

rule Namespace
    Identifier
    optional repeated compound
        "::"
        Identifier
    end compound
end rule

rule NamespaceStatement
    "namespace"
    move
    $ns = Namespace
end rule

rule ImportStatement
    "import"
    move
    $ns = Namespace
end rule

rule RootStatement
    move
    $st = ImportStatement | ClassDecl
    Newline
end rule

rule Program
    optional repeated Newline
    $ns = NamespaceStatement
    optional repeated Newline
    $st = optional repeated RootStatement
    optional repeated Newline
end rule
