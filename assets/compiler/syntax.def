// This file defines the Keid syntax in Keid Syntax Definition Language (KSDL).
// The parser for this file can be found in `parser.keid`.
// See "syntax.def.README.md" for documentation regarding the format of this file.

RULE Identifier
    OR(RANGE A-Z, RANGE a-z, LITERAL _)
    OPTIONAL REPEATED OR(RANGE A-Z, RANGE a-z, LITERAL _, RANGE 0-9)
END RULE

RULE TypeModifier
    LITERAL public
END RULE

RULE GenericDecl
    $name = RULE Identifier
END RULE

RULE GenericDecls
    LITERAL <
    MOVE
    $decls = RULE GenericDecl
    $decls = OPTIONAL REPEATED COMPOUND(LITERAL COMMA, RULE GenericDecl) SELECT 2
    LITERAL >
END RULE

RULE ClassDecl
    $modifiers = OPTIONAL REPEATED RULE TypeModifier
    LITERAL class
    MOVE
    $name = RULE Identifier
    $generics = OPTIONAL RULE GenericDecls
    LITERAL {
END RULE

RULE Namespace
    RULE Identifier
    OPTIONAL REPEATED COMPOUND(LITERAL ::, RULE Identifier)
END RULE

RULE NamespaceStatement
    LITERAL namespace
    MOVE
    $ns = RULE Namespace
END RULE

RULE ImportStatement
    LITERAL import
    MOVE
    $ns = RULE Namespace
END RULE

RULE RootStatement
    MOVE
    $st = OR(RULE ImportStatement, RULE ClassDecl)
    LITERAL NEWLINE
END RULE

RULE Program
    OPTIONAL REPEATED LITERAL NEWLINE
    $ns = RULE NamespaceStatement
    OPTIONAL REPEATED LITERAL NEWLINE
    $st = OPTIONAL REPEATED RULE RootStatement
    OPTIONAL REPEATED LITERAL NEWLINE
END RULE
